Getting up and running
- Install the prerequisites
docker
docker-compose
docker-machine
virtualbox

- copy the certificates from your Docker machine to Jenkins
cp ~/.docker/machine/certs ~/Development/cistack/docker/jenkins/certs

- Start the swarm
ssh setup-swarm.sh
eval "$(docker-machine env --swarm swarm-manager)"

- Start the Docker services
docker-compose up

- Install Jenkins and necessary plugins

- Setup the credentials
Credentials -> Global -> Add
Docker Host Certificate Authentication
Client key = key.pem
Client Certification = cert.pem
Server CA Cert = ca.pem

- Configure Yet Another Docker
In Jenkins main configuration
Set Docker URL e.g http://192.168.99.100:2376
Set Host Credentials to the above
Quick test

- Add Docker template
Docker image name = Name of image from docker-compose ps
Pull Image = Never
Remove Container Settings = remove volume
Jenkins Slave config = androidslave
Launch method = JNLP
Save

- Put it in a pipeline
node ('androidslave') {

  stage 'Stage 1'
  sh 'echo "Hello World!"'

}
